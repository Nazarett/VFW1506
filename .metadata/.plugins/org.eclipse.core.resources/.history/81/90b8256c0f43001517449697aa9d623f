//Main Backgraound

Ti.UI.setBackgroundColor("#000");

//Data

//JSON

var mainWindow = Ti.UI.createWindow({
	backgraoundColor: "#f5f5f5"
});

var tv= [
	{ 
		"title": "Arrow", 
		"description": "A man lost in a island for five years, finds his way back home and becomes a night vigilante to keep his city safe from crime.",

	},
	
	{
		"title": "Commando", 
		"description": "John Matrix (ex-military) does everything posible to recover his kidnap daughter from some colleges of his."
	}	
];

//console.log(tv [0].title);
//console.log(tv [1].description);

for(var i= 0; i<tv.length; i++){
	//console.log(tv[i]);
	for(var x in tv[i]){
		console.log(tv[i][x]);
	}
}

//Table view and details

var mainWindow = Ti.UI.createWindow({
	backgroundColor: "#f5f5f5"
});

var titleView = Ti.UI.createView({
	backgroundColor: "#fff",
	height: 65,
	top: 0
});

var border = Ti.UI.createView({
	backgroundColor : "#dbdbdb",
	height: 1,
	top: titleView.height + titleView.top
});

var titleLabel = Ti.UI.createLabel({
	text:"Tv Shows & Movies",
	font: {fontSize: 20, familyFont: "Arial", fontStyle: "bold"},
	textAlign: "center",
	width: "100%",
	top: 30
	
});

var content = Ti.UI.createTableView({
	top: border.height + border.top
});

if(Ti.Platform.name === "iPhone OS"){
	content.style = Ti.UI.iPhone.TableViewStyle.GROUPED;
}

var showsSection = Ti.UI.createTableViewSection({
	headerTitle: "Shows",
	footerTitle: "On Tv"
});

var moviesSection = Ti.UI.createTableViewSection({
	headerTitle: "Movies",
	footerTitle: "Coming Soon"
});

var detail = function(){
	var showsDescription = Ti.UI.createWindow({
		backgroundColor:"#f5f5f5"
	});
	
	var showsTitleView = Ti.UI.createView({
	backgroundColor: "#fff",
	height: 65,
	top: 0
	});
	
	var showsBorder = Ti.UI.createView({
		backgroundColor : "#dbdbdb",
		height: 1,
		top: titleView.height + titleView.top
	});
	
	var showsTitleLabel = Ti.UI.createLabel({
		text:this.title,
		font: {fontSize: 20, familyFont: "Arial", fontStyle: "bold"},
		textAlign: "center",
		width: "100%",
		top: 30
	});
	
	var showsDetail = Ti.UI.createLabel({
		text: this.detail,
		font: {fontSize: 16, familyFont: "Arial"},
		top:showsBorder.height + showsBorder.top + 35,
		left: 5,
		right: 5
		});
		
		var closeButton = Ti.UI.createLabel({
			text: "Previous",
			backgroundColor: "#333",
			color: "#fff",
			height: 45,	
			font: {fontSize: 20, familyFont: "Arial"},
			width: "100%",
			bottom: 0,
			textAlign: "center"
			
		});
		
		var back = function(){
			showsDescription.close();
		};
		
		closeButton.addEventListener("click", back);
		
	showsTitleView.add(showsTitleLabel);
	showsDescription.add(showsTitleView, showsBorder,showsDetail, closeButton);
	
	showsDescription.open();
};

for(var i= 0, j= shows.length; i<j; i++){
	var theRow = Ti.UI.createTableViewRow({
		title: shows[i].title,
		detail: shows[i].description,
		hasChild: true
	});
	showsSection.add(theRow);
	theRow.addEventListener("click", detail);
}



for(var i= 0, j= movies.length; i<j; i++){
	var theRow = Ti.UI.createTableViewRow({
		title: movies[i].title,
		hasChild: true
	});
	moviesSection.add(theRow);
}

var tvSections = [showsSection, moviesSection];

content.setData(tvSections);

titleView.add(titleLabel);
mainWindow.add(titleView, border, content);
mainWindow.open();

